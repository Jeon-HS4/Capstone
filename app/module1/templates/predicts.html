<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>미래 예측 대시보드</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
        }

        #header {
            background-color: #f1f1f1;
            padding: 10px 20px;
            color: #333;
        }

        #top {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #top h1 {
            margin-bottom: 10px;
        }

        #top h1 a {
            color: #000;
            text-decoration: none;
            font-size: 24px;
        }

        .menu_top {
            width: 100%; 
            display: flex;
            justify-content: flex-end;
        }

        .search_form input[type="text"] {
            padding: 8px;
            margin-right: 10px;
        }

        .search_form button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        #gnb .wfix {
            display: flex;
            justify-content: space-around;
            width: 100%;
        }

        .lst_menu {
            list-style: none;
            padding: 0;
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .lst_menu li {
            padding: 10px;
        }

        .lst_menu a {
            color: #666;
            text-decoration: none;
        }

        .lst_menu a:hover {
            color: #000;
        }

        .btn_allmenu {
            display: none;
        }

        .container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            
            background-size: cover;
            background-position: center; /
        }

        .header {
            color: rgb(0, 0, 0);
            padding: 20px;
            text-align: center;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .content {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
        }

        .selector {
    margin-bottom: 20px;
    text-align: center;
        }

        .selector label {
    font-size: 1.2em; /* 라벨 폰트 크기 조정 */
    margin-right: 10px;
        }

    .selector select {
    padding: 8px;
    font-size: 1.2em; /* 선택 박스 폰트 크기 조정 */
    border: 1px solid #ccc;
    border-radius: 4px; 
        }


        .chart {
            flex: 1;
            max-width: 800px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .info-panel {
            width: 300px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px;
        }
    </style>
</head>
<body>
    <header id="header">
        <div id="top">
            <h1>
                <a href="page">환경정보서비스</a>
            </h1>
            <div class="menu_top"></div>
        </div>
        <nav id="gnb" tabindex="-1">
            <div class="wfix">
                <ul class="lst_menu">
                    <li class="m1"><a href="introduce" class="d1">환경정보서비스란?</a></li>
                    <li class="m2"><a href="view_data" class="d1">데이터 확인</a></li>
                    <li class="m4"><a href="predicts" class="d1">미래 정보 예측</a></li>
                    <li class="m5"><a href="FAQ" class="d1">FAQ</a></li>
                </ul>
                <a href="javascript:;" class="btn_allmenu"><i class="ico_comm">전체메뉴 열기/닫기</i></a>
            </div>
        </nav>
    </header>
    <div class="container">
        <header class="header">
            <h1 id="chart-title">미래 예측</h1>
        </header>
        <main class="main-content">
            <div class="selector">
                <label for="region-select">지역 선택:</label>
                <select id="region-select" onchange="updateChart()">
                    <option value="서울">서울</option>
                    <option value="인천">인천</option>
                    <option value="부산">부산</option>
                </select>
            </div>
            <div class="content">
                <div class="chart">
                    <div id="chart-plot"></div>
                </div>
                <div class="info-panel">
                    <h2>데이터 요약</h2>
                    <p id="summary"></p>
                    <h2>예측 방법론</h2>
                    <p>예측은 과거 데이터 포인트를 사용한 간단한 선형 회귀 모델을 기반으로 합니다.</p>
                    <h2>참고 자료</h2>
                    <p>
                        데이터 출처: <a href="view_data">환경정보서비스</a>.<br>
                    </p>
                </div>
            </div>
        </main>
        <footer class="footer">
            <p>&copy; 한국공학대학교</p>
        </footer>
    </div>
    <script>
        // 데이터셋 (예시 데이터)
        const data = {
            서울: [
                { date: '2023-01-01', value: 10 },
                { date: '2023-02-01', value: 15 },
                { date: '2023-03-01', value: 13 },
                { date: '2023-04-01', value: 17 },
                { date: '2023-05-01', value: 20 }
            ],
            인천: [
                { date: '2023-01-01', value: 20 },
                { date: '2023-02-01', value: 25 },
                { date: '2023-03-01', value: 23 },
                { date: '2023-04-01', value: 27 },
                { date: '2023-05-01', value: 30 }
            ],
            부산: [
                { date: '2023-01-01', value: 30 },
                { date: '2023-02-01', value: 35 },
                { date: '2023-03-01', value: 33 },
                { date: '2023-04-01', value: 37 },
                { date: '2023-05-01', value: 40 }
            ]
        };

        // 데이터 전처리 및 차트 업데이트
        function updateChart() {
            const region = document.getElementById('region-select').value;
            const regionData = data[region];
            const dates = regionData.map(d => d.date);
            const values = regionData.map(d => d.value);

            const forecastedValues = forecast(values, 5);
            const forecastedDates = ['2023-06-01', '2023-07-01', '2023-08-01', '2023-09-01', '2023-10-01'];

            const trace1 = {
                x: dates,
                y: values,
                mode: 'lines+markers',
                name: '실제 데이터'
            };

            const trace2 = {
                x: forecastedDates,
                y: forecastedValues,
                mode: 'lines+markers',
                name: '예측 데이터',
                line: { dash: 'dot', color: 'red' }
            };

            const layout = {
                title: `실제데이터 및 예측 그래프 - ${region}`,
                xaxis: { title: '날짜' },
                yaxis: { title: '값' }
            };

            Plotly.newPlot('chart-plot', [trace1, trace2], layout);

            document.getElementById('chart-title').innerText = `미래 정보 예측`;

            // 데이터 요약 업데이트
            const summary = `
                최대 값: ${Math.max(...values)}<br>
                최소 값: ${Math.min(...values)}<br>
                평균 값: ${(values.reduce((a, b) => a + b, 0) / values.length).toFixed(2)}
            `;
            document.getElementById('summary').innerHTML = summary;
        }

        // 간단한 예측 알고리즘 (선형 회귀를 가정)
        function forecast(values, steps) {
            const lastValue = values[values.length - 1];
            const trend = (values[values.length - 1] - values[0]) / (values.length - 1);
            let forecastedValues = [];
            for (let i = 1; i <= steps; i++) {
                forecastedValues.push(lastValue + trend * i);
            }
            return forecastedValues;
        }

        // 초기 차트 그리기
        updateChart();
    </script>
</body>
</html>
